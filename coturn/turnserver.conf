# Coturn TURN/STUN Server Configuration
# Variables marked with __VAR__ are replaced by setup.sh from .env

# TURN server realm
realm=__DOMAIN__

# Authentication
use-auth-secret
static-auth-secret=__TURN_SECRET__

# Networking
listening-port=3478
tls-listening-port=5349
min-port=__TURN_MIN_PORT__
max-port=__TURN_MAX_PORT__

# Fingerprinting
fingerprint

# Logging (REDUCED to prevent memory leak)
log-file=stdout
# verbose  # DISABLED - causes memory leak!

# Security
no-multicast-peers
no-cli
no-tlsv1
no-tlsv1_1

# Performance & Memory Optimization
total-quota=100
bps-capacity=0  # No bandwidth limit per session
max-bps=3000000  # 3 Mbps total bandwidth limit
stale-nonce=600

# Connection limits (prevent memory leak)
user-quota=10  # Max 10 sessions per user
total-quota=100  # Max 100 total sessions

# Session cleanup (prevent memory buildup)
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=100.64.0.0-100.127.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.0.0.0-192.0.0.255
denied-peer-ip=192.0.2.0-192.0.2.255
denied-peer-ip=192.88.99.0-192.88.99.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=198.18.0.0-198.19.255.255
denied-peer-ip=198.51.100.0-198.51.100.255
denied-peer-ip=203.0.113.0-203.0.113.255
denied-peer-ip=240.0.0.0-255.255.255.255
